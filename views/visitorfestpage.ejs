<%-include("partials/header")%>

<style>
    #back:hover {
        cursor: pointer;
    }
  </style>
  <i class="fa fa-arrow-left" id="back" aria-hidden="true" style="font-size: 2rem; margin-top: 1%;margin-left: 1%;" onclick="window.location.href='/Visitorhome'"></i>
    
    
  <% let months = new Map();
  months.set(1,"Jan");
  months.set(2,"Feb");
  months.set(3,"Mar");
  months.set(4,"Apr");
  months.set(5,"May");
  months.set(6,"Jun");
  months.set(7,"Jul");
  months.set(8,"Aug");
  months.set(9,"Sep");
  months.set(10,"Oct");
  months.set(11,"Nov");
  months.set(12,"Dec"); %>

<% var i%>
<% for(i=0;i<fests.competitions.length; i++){ %> 
    <div class="card" style="width: 18rem;">
        
        <div class="card-body">
            <div>
                <strong>Name :</strong> <%=fests.competitions[i].name%>
            </div>
            <div>
                <strong>Description :</strong> <%=fests.competitions[i].descr%>
            </div>
            <div>
                <% let suffix;
                switch((fests.competitions[i].date.getDate())%10) {
                    case 11: suffix = "th";
                                break;
                    case 1: suffix = "st";
                            break;
                    case 2: suffix = "nd";
                            break;
                    case 3: suffix = "rd";
                            break;
                    default: suffix = "th";
                } %>
                <strong>Date :</strong> <%=fests.competitions[i].date.getDate()%><%=suffix%> <%=months.get(fests.competitions[i].date.getMonth()+1)%> 
                <%=fests.competitions[i].date.getFullYear()%>
            </div>
            <div>
                <span> 
                    <strong>Time :</strong> <%=fests.competitions[i].starttime.getHours()%>:<%if(fests.competitions[i].starttime.getMinutes()<10){%>0<%}%><%=fests.competitions[i].starttime.getMinutes()%>
                </span>
                <span>
                    - <%=fests.competitions[i].endtime.getHours()%>:<%if(fests.competitions[i].starttime.getMinutes()<10){%>0<%}%><%=fests.competitions[i].endtime.getMinutes()%>
                </span>
            </div>    
            <div>
                <strong>Venue :</strong> <%=fests.competitions[i].venue%>
            </div>
            <form action="/Visitorhome/<%=fest%>/<%= fests.competitions[i]._id%>" method="POST">
                <%if(fests.competitions[i].type == "competitionsd" || fests.competitions[i].type == "competitionss"){%> 
                      <button id="registerb" name="register" value="register">Register</button>
                 <%}%>  
                      <button id="scheduleb" name="schedule" value="schedule">Schedule</button>
            </form>
            <%if(fests.competitions[i].type == "competitionss"){%>
             <div>
                 <form action="/Visitorhome/<%=fest%>/<%= fests.competitions[i]._id%>">
                     <button>Vote</button> 
                 </form> 
             </div>   
             <%}%>    
             <%if(fests.competitions[i].type == "competitionsd" && fests.competitions[i].resultsrelease==true){%>
                <div>
                    <form action="/cordhome/<%=fest%>/<%= fests.competitions[i]._id%>/results">
                        <button>View</button> 
                    </form> 
                </div>   
                <%}%>    
        </div>
    </div>                      
<% } %>
<%-include("partials/footer")%>