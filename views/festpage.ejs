<%- include("partials/header") %>

<button onclick="window.location.href='/cordhome'">Back</button>

<style>
    .container {
        width:45%;
        padding: 50px 50px;
    }
</style>

<button onclick="window.location.href='/cordhome/<%=fest%>/addcompetitions'">Add Competition</button>

<button onclick="window.location.href='/candidateserror'">
    Candidates error
</button>
<button onclick="window.location.href='/competitionserror'">
    Competitions error
</button>

<% let months = new Map();
    months.set(1,"Jan");
    months.set(2,"Feb");
    months.set(3,"Mar");
    months.set(4,"Apr");
    months.set(5,"May");
    months.set(6,"Jun");
    months.set(7,"Jul");
    months.set(8,"Aug");
    months.set(9,"Sep");
    months.set(10,"Oct");
    months.set(11,"Nov");
    months.set(12,"Dec"); %>

 <!-- let days = new Map();
    days.set(1,"Monday");
    days.set(2,"Tuesday");
    days.set(3,"Wednesday");
    days.set(4,"Thursday");
    days.set(5,"Friday");
    days.set(6,"Saturday");
    days.set(7,"Sunday");  -->


<% var i%>
<% for(i=0;i<fests.competitions.length; i++){ %> 
    <div>
        <strong>Name :</strong> <%=fests.competitions[i].name%>
    </div>
    <div>
        <strong>Uploaded Image :</strong> <%=fests.competitions[i].imageUpload%>
    </div>
    <div>
        <strong>Description :</strong> <%=fests.competitions[i].descr%>
    </div>
    <div>

        <% let suffix;
        switch((fests.competitions[i].date.getDate())%10) {
            case 11: suffix = "th";
                        break;
            case 1: suffix = "st";
                    break;
            case 2: suffix = "nd";
                    break;
            case 3: suffix = "rd";
                    break;
            default: suffix = "th";
        } %>
        <strong>Date :</strong> <%=fests.competitions[i].date.getDate()%><%=suffix%> <%=months.get(fests.competitions[i].date.getMonth()+1)%> 
        <%=fests.competitions[i].date.getFullYear()%>
    </div>
    <div>
        <strong>Venue :</strong> <%=fests.competitions[i].venue%>
    </div>
    <div>
        <strong>Address:</strong> <%=fests.competitions[i].address%>
    </div>
    <div>
        <strong>City:</strong> <%=fests.competitions[i].city%>
    </div>
    <div>
        <strong>Voting :</strong> <%=fests.competitions[i].voting%>
    </div>
    <div> 
        <strong>Start Time :</strong> <%=fests.competitions[i].starttime.getHours()%>:<%if(fests.competitions[i].starttime.getMinutes()<10){%>0<%}%><%=fests.competitions[i].starttime.getMinutes()%>
    </div>
    <div>
        <strong>End Time :</strong> <%=fests.competitions[i].endtime.getHours()%>:<%if(fests.competitions[i].starttime.getMinutes()<10){%>0<%}%><%=fests.competitions[i].endtime.getMinutes()%>
    </div>
    <div>
        <%if((fests.competitions[i].type=="competitionsd" && fests.competitions[i].currentcand.length == 0)||(fests.competitions[i].type=="competitionss" && fests.competitions[i].currentround.length == 0)){%>
           <button><a href="/cordhome/<%=fests.festname%>/<%=fests.competitions[i]._id%>/start">View</a></button>
        <%}else{%>
           <button><a href="/cordhome/<%=fests.festname%>/<%=fests.competitions[i]._id%>">View</a></button>
        <%}%>
        <form action="/cordhome/<%=fests.festname%>/<%=fests.competitions[i]._id%>/delete" method="POST">
          <button>Delete</button>
        </form>  
    </div>
    <hr>
<% } %>
</div>
</div>

<%- include("partials/footer") %>





       